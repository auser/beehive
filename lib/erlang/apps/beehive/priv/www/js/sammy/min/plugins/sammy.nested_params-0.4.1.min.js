// -- Sammy -- /plugins/sammy.nested_params.js
// http://code.quirkey.com/sammy
// Version: 0.4.1
// Built: Mon Jan 11 22:02:13 -0500 2010
(function(a){Sammy=Sammy||{};function b(g,f,h){var d,c,e;if(f.match(/^[^\[]+$/)){h[f]=unescape(g)}else{if(d=f.match(/^([^\[]+)\[\](.*)$/)){c=d[1];e=d[2];if(h[c]&&!a.isArray(h[c])){throw ("400 Bad Request")}if(e){d=e.match(/^\[([^\]]+)\](.*)$/);if(!d){throw ("400 Bad Request")}if(h[c]){if(h[c][h[c].length-1][d[1]]){h[c].push(b(g,d[1]+d[2],{}))}else{a.extend(true,h[c][h[c].length-1],b(g,d[1]+d[2],{}))}}else{h[c]=[b(g,d[1]+d[2],{})]}}else{if(h[c]){h[c].push(unescape(g))}else{h[c]=[unescape(g)]}}}else{if(d=f.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){c=d[1];e=d[2]+d[3];if(h[c]&&a.isArray(h[c])){throw ("400 Bad Request")}if(h[c]){a.extend(true,h[c],b(g,e,h[c]))}else{h[c]=b(g,e,{})}}}}return h}Sammy.NestedParams=function(c){a.extend(c,{_parseFormParams:function(d){var e={};a.each(d.serializeArray(),function(f,g){a.extend(true,e,b(g.value,g.name,e))});return e}})}})(jQuery);